/*========================================================================*/
/* NOM DU FICHIER  : def_exploitfiles.c	                                  */
/*========================================================================*/
/* Compilateur     : GCC                                                  */
/* Linking locator : GCC                                                  */
/* Formatter       : GCC                                                  */
/* Auteur          : CM                                                   */
/* Date			   : 26/01/2010                                           */
/* Libelle         : Base de données: définition des fichiers d'exploit	  */
/* Projet          : WRM100                                               */
/* Indice          : BE060                                                */
/*========================================================================*/
/* Historique      :                                                      */
//BE007 26/01/2010 CM
// - CREATION
//BE010 03/02/2010 CM
// - Ajout information statut IP des interfaces
//BE013 26/02/2010 CM
// - Modification chemins des bdd (sous /tmp)
//BE031.3 08/06/2010 JP
// - dans la page test production final, l'etat de la connexion de la station est memorise avec code couleur (rouge, orange,vert)
//BE037 06/07/2010 CM
// - Ajout exploitation temperature 
// - Ajout récupération statut ethernet des 2 ports ethernet
// - Ajout exploitation du client NTP
//BE046 17/11/2010 CM
// - Correction alarme Ethernet pour chaque accès
//	alarme ethernet lan 1 et alarme ethernet lan 2
//	L'alarme "ethernet lan 2" est non validée par défaut
//	+ aussi disponible sur ACCESS POINT
//BE047 29/11/2010 CM
// - Gestion mode dégradé - connection à AP impossible en permanence suite à configuration wifi 
//BE050 09/12/2010 CM
// - Correction gestion NTP/SNTP
//BE051 13/12/2010 CM
// - Ajout exploitation SSID (utile si dual ssid activé)
//BE058 21/01/2011 CM
// - Ajout dans exploitation du canal en cours (sur AP et STA)
//BE060 16/03/2011
// - DEP: Ajout des évenements de connexion et déconnexion d'une STATION
/*========================================================================*/

/*_____I - COMMENTAIRES - DEFINITIONS -  REMARQUES _______________________*/

/*_____II - DEFINE SBIT __________________________________________________*/
#define _DEF_EXPLOITFILES

/*_____III - INCLUDE - DIRECTIVES ________________________________________*/
#include "../Include/headers.h"
#include "headers.h"

/*_____IV - VARIABLES GLOBALES ___________________________________________*/

//***************************************************************************
//**************** CONTENU DU FICHIER SYSTEM GENERAL.EXP
//***************************************************************************
T_STRUCT_FILE_FIELD PT_CONTENU_FILE_GENERAL_EXP[] = {
	{	"version[APPLI_CPU].message",				FTYPVAL_STRING,	NULL, TAILLE_MAX_MSG_VERSION, 0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, s_version[VERSION_LOGICIELLE_APPLI_CPU].ps8_message)		},
	{	"version[APPLI_CPU].info_suppl",			FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, s_version[VERSION_LOGICIELLE_APPLI_CPU].u8_info_suppl)	},
	{	"version[BOOT_CPU].message",				FTYPVAL_STRING,	NULL, TAILLE_MAX_MSG_VERSION, 0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, s_version[VERSION_LOGICIELLE_BOOT_CPU].ps8_message)		},
	{	"type_equipement",							FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, u8_type_equipement)	},
	{	"version_be_uboot",							FTYPVAL_STRING,	NULL, TAILLE_MAX_MSG_VERSION_UBOOT,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, ps8_version_be_uboot)	},
	{	"interface[LAN].presence",					FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, ps_interface[INTERFACE_LAN].u8_presence)	},
	{	"interface[LAN].add_mac",					FTYPVAL_ADR_MAC,NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, ps_interface[INTERFACE_LAN].pu8_add_mac)		},
	{	"interface[LAN].statut_ip",					FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, ps_interface[INTERFACE_LAN].u8_statut_ip)	},
	{	"interface[LAN].add_ip",					FTYPVAL_STRING,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, ps_interface[INTERFACE_LAN].ps8_add_ip)	},
	{	"interface[LAN].mask",						FTYPVAL_STRING,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, ps_interface[INTERFACE_LAN].ps8_mask)		},
	{	"interface[WLAN].presence",					FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, ps_interface[INTERFACE_WLAN].u8_presence)	},
	{	"interface[WLAN].add_mac",					FTYPVAL_ADR_MAC,NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, ps_interface[INTERFACE_WLAN].pu8_add_mac)		},
	{	"interface[WLAN].statut_ip",				FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, ps_interface[INTERFACE_WLAN].u8_statut_ip)	},
	{	"interface[WLAN].add_ip",					FTYPVAL_STRING,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, ps_interface[INTERFACE_WLAN].ps8_add_ip)	},
	{	"interface[WLAN].mask",						FTYPVAL_STRING,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, ps_interface[INTERFACE_WLAN].ps8_mask)	},
	{	"presence_ntp[P]",							FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, pu8_presence_serveur_ntp[SERVEUR_NTP_PRINCIPAL])	},
	{	"presence_ntp[S]",							FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, pu8_presence_serveur_ntp[SERVEUR_NTP_SECOURS])	},
	{	"link_statut_ethernet_1",					FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, u8_link_statut_ethernet[PORT_ETHERNET_1])	},
	{	"link_statut_ethernet_2",					FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, u8_link_statut_ethernet[PORT_ETHERNET_2])	},
	{	"temperature",								FTYPVAL_S32SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_GENERAL, s32_temperature)	},
	{	NULL,	0,	NULL,	0,	0,	0	}
};

//***************************************************************************
//**************** CONTENU DU FICHIER SYSTEM STATION.EXP
//***************************************************************************
T_STRUCT_FILE_FIELD PT_CONTENU_FILE_STATION_EXP[] = {
	{	"old_statut_connexion",				FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_STATION, u8_old_statut_connexion)	},
	{	"statut_connexion",					FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_STATION, u8_statut_connexion)	},
	{	"bssid_add_mac",					FTYPVAL_ADR_MAC,NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_STATION, pu8_bssid_add_mac)		},
	{	"rssi_dbm",							FTYPVAL_S32SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_STATION, s32_rssi_dbm)		},
	{	"cptsecond_noconnected",			FTYPVAL_U32SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_STATION, u32_cptsecond_noconnected)		},
	{	"ssid_inprogress",					FTYPVAL_STRING,	NULL, NB_MAX_CHAINE_SSID,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_STATION, ps8_ssid_inprogress)		},
	{	"channel_inprogress",				FTYPVAL_U16SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_STATION, u16_channel_inprogress)	},
	{	"freq_MHz",							FTYPVAL_U16SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_STATION, u16_freq_MHz_inprogress)	},
	{	NULL,	0,	NULL,	0,	0,	0	}
};

//***************************************************************************
//**************** CONTENU DU FICHIER SYSTEM ACCESSPOINT.EXP
//***************************************************************************
T_STRUCT_FILE_FIELD PT_DEF_STRUCT_CLTWIFI[] = {
	{	CH_TAB_INDEX,		FTYPVAL_U16SOD,	NULL, 0,	0,	0},
	{	"present",			FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_WIFI_CLIENT, u8_present)	},
	{	"addrmac",			FTYPVAL_ADR_MAC,NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_WIFI_CLIENT, pu8_add_mac)	},
	{	"rssi_dbm",			FTYPVAL_S32SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_WIFI_CLIENT, s32_rssi_dbm)	},
	{	"statut",			FTYPVAL_U32SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_WIFI_CLIENT, u32_statut)	},
	{	"time_reconnexion",	FTYPVAL_U32SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_WIFI_CLIENT, u32_time_reconnexion)	},
	{	NULL,	0,	NULL,	0,	0,	0	}
};

T_STRUCT_FILE_FIELD PT_CONTENU_FILE_ACCESSPOINT_EXP[] = {
	{	"nb_associations",			FTYPVAL_U16SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_ACCESS_POINT, u16_nb_associations)	},
	{	"clientWifi",				FTYPVAL_TABSTRUCT,	(struct T_STRUCT_FILE_FIELD*)PT_DEF_STRUCT_CLTWIFI,	sizeof(S_STRUCT_EXP_WIFI_CLIENT),	NB_ASSOCIATED_STATIONS_MAX,	MACRO_OFFSETOF(S_STRUC_EXP_ACCESS_POINT, s_wifi_client[0])	},
	{	"channel_inprogress",		FTYPVAL_U16SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_ACCESS_POINT, u16_channel_inprogress)	},
	{	"freq_MHz",					FTYPVAL_U16SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUC_EXP_ACCESS_POINT, u16_freq_MHz_inprogress)	},
	{	NULL,	0,	NULL,	0,	0,	0	}
};

//***************************************************************************
//**************** CONTENU DU FICHIER SYSTEM DHCP.EXP
//***************************************************************************
T_STRUCT_FILE_FIELD PT_DEF_STRUCT_CLTDHCP[] = {
	{	CH_TAB_INDEX,		FTYPVAL_U16SOD,	NULL, 0,	0,	0},
	{	"present",			FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_CLIENT_DHCP, u8_present)			},
	{	"addrmac",			FTYPVAL_ADR_MAC,NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_CLIENT_DHCP, pu8_add_mac)			},
	{	"addrip",			FTYPVAL_U32SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_CLIENT_DHCP, u32_adresse_ip)		},
	{	"time",				FTYPVAL_U32SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_CLIENT_DHCP, u32_temps_restant)	},
	{	NULL,	0,	NULL,	0,	0,	0	}
};

T_STRUCT_FILE_FIELD PT_CONTENU_FILE_DHCP_EXP[] = {
	{	"server_dhcp_full",			FTYPVAL_U8SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_DHCP, u8_server_dhcp_full)	},
	{	"nb_clientsDHCP",			FTYPVAL_U16SOD,	NULL, 0,	0,	MACRO_OFFSETOF(S_STRUCT_EXP_DHCP, u16_nb_clients)	},
	{	"clientDHCP",				FTYPVAL_TABSTRUCT,	(struct T_STRUCT_FILE_FIELD*)PT_DEF_STRUCT_CLTDHCP,	sizeof(S_STRUCT_EXP_CLIENT_DHCP),	NB_MAX_CLIENTS_DHCP,	MACRO_OFFSETOF(S_STRUCT_EXP_DHCP, s_client_connected[0])	},
	{	NULL,	0,	NULL,	0,	0,	0	}
};


//****************************************
//DEFINITION DES FICHIERS D'EXPLOITATION
//****************************************
T_STRUCT_DEFINITION_FILE_FS PT_DEF_FILE_EXPLOIT[NB_MAX_ID_FILES_EXPLOIT] =
{
	{//ID_FILE_EXP_NULL
		"",	 //ps8_path_file
		DEFFILE_TYPE_AUCUN,	//u8_type
		FALSE,	//u8_avec_checksum
		NULL ,//pt_contenu
	},
	{//ID_FILE_BDD_GENERAL_EXP
		PATH_DIR__BDD_EXPLOIT NFILE_GENERAL EXT_EXP, //ps8_path_file
		DEFFILE_TYPE_EXPLOIT, //u8_type
		FALSE,	//u8_avec_checksum
		PT_CONTENU_FILE_GENERAL_EXP ,//pt_contenu
	},
	{//ID_FILE_BDD_STATION_EXP
		PATH_DIR__BDD_EXPLOIT NFILE_STATION EXT_EXP, //ps8_path_file
		DEFFILE_TYPE_EXPLOIT, //u8_type
		FALSE,	//u8_avec_checksum
		PT_CONTENU_FILE_STATION_EXP ,//pt_contenu
	},
	{//ID_FILE_BDD_ACCESSPOINT_EXP
		PATH_DIR__BDD_EXPLOIT NFILE_ACCESS_POINT EXT_EXP, //ps8_path_file
		DEFFILE_TYPE_EXPLOIT, //u8_type
		FALSE,	//u8_avec_checksum
		PT_CONTENU_FILE_ACCESSPOINT_EXP ,//pt_contenu
	},
	{//ID_FILE_BDD_DHCP_EXP
		PATH_DIR__BDD_EXPLOIT NFILE_DHCP EXT_EXP, //ps8_path_file
		DEFFILE_TYPE_EXPLOIT, //u8_type
		FALSE,	//u8_avec_checksum
		PT_CONTENU_FILE_DHCP_EXP ,//pt_contenu
	},
};



/*_____V - PROCEDURES ____________________________________________________*/


/*_____VII - PROCEDURE D'INITIALISATION __________________________________*/

//=====================================================================================
// Fonction		: InitModule_Def_ExploitFiles
// Entrees		: rien
// Sortie		: rien
// Auteur		: CM - 26/01/2010 -
// Description	: Initialisation du module de def_exploitfiles
//=====================================================================================
void InitModule_Def_ExploitFiles(void)
{

}/*InitModule_Def_ExploitFiles*/

